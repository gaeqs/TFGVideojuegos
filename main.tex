\documentclass[twoside,a4paper,11pt]{book}
\usepackage[english]{babel}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{url}
\usepackage[pdftex]{graphicx}
\usepackage{a4wide}
\usepackage{geometry}
\usepackage[backend=bibtex]{biblatex}
\usepackage{hyperref}
\usepackage{inlinedef}
\usepackage{subfiles}
\usepackage[normalsize]{subfigure}
\usepackage{color}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage[normalem]{ulem}
\usepackage{float}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage[dvipsnames]{xcolor}
\usepackage{listings}
\usepackage{textcomp}
\usepackage{tikz}
\usepackage{verbatim}
\usepackage{forest}
\usepackage{fontawesome}

\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

% For using margin notes instead of marginpar
\usepackage{marginnote}
% Margin notes smaller that default
\renewcommand*{\marginfont}{\footnotesize}
\newcommand{\myparagraph}[1]{\paragraph{#1}\mbox{}\\}

\addto\captionsenglish{\renewcommand{\chaptername}{Capítulo}}
\addto\captionsenglish{\renewcommand{\contentsname}{Índice}}
\addto\captionsenglish{\renewcommand{\listfigurename}{Lista de figuras}}

\lstset{
    backgroundcolor=\color[rgb]{0.95, 0.95, 0.95},
    tabsize=2,
    rulecolor=,
    basicstyle=\scriptsize,
    upquote=true,
    aboveskip={1.5\baselineskip},
    columns=fixed,
    showstringspaces=false,
    extendedchars=true,
    breaklines=true,
    prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
    frame=single,
    showtabs=false,
    showspaces=false,
    showstringspaces=false,
    identifierstyle=\ttfamily,
    keywordstyle=\color[rgb]{1.0,0,0},
    keywordstyle=[1]\color[rgb]{0,0,0.75},
    keywordstyle=[2]\color[rgb]{0.5,0.0,0.0},
    keywordstyle=[3]\color[rgb]{0.127,0.427,0.514},
    keywordstyle=[4]\color[rgb]{0.4,0.4,0.4},
    commentstyle=\color[rgb]{0.133,0.545,0.133},
    stringstyle=\color[rgb]{0.639,0.082,0.082},
}

\lstdefinestyle{java} {
    language=Java,
    morekeywords={record, var}
}

\lstdefinelanguage{Kotlin}{
    comment=[l]{//},
    commentstyle={\color{gray}\ttfamily},
    emph={filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println},
    emphstyle={\color{OrangeRed}},
    identifierstyle=\color{black},
    keywords={!in, !is, abstract, actual, annotation, as, as?, break, by, catch, class, companion, const, constructor, continue, crossinline, data, delegate, do, dynamic, else, enum, expect, external, false, field, file, final, finally, for, fun, get, if, import, in, infix, init, inline, inner, interface, internal, is, lateinit, noinline, null, object, open, operator, out, override, package, param, private, property, protected, public, receiveris, reified, return, return@, sealed, set, setparam, super, suspend, tailrec, this, throw, true, try, typealias, typeof, val, var, vararg, when, where, while},
    keywordstyle={\color{NavyBlue}\bfseries},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[s]{"""*}{*"""},
    ndkeywords={@Listener, @Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Any, Unit, Nothing},
    ndkeywordstyle={\color{BurntOrange}\bfseries},
    sensitive=true,
    stringstyle={\color{ForestGreen}\ttfamily},
}

\newcommand{\basictree}[1]{\begin{forest}
    for tree={
        font=\ttfamily,
        grow'=0,
        child anchor=west,
        parent anchor=south,
        anchor=west,
        calign=first,
        edge path={
            \noexpand\path [draw, \forestoption{edge}]
            (!u.south west) +(7.5pt,0) |- node[fill,inner sep=1.25pt] {} (.child anchor)\forestoption{edge label};
        },
        before typesetting nodes={
            if n=1
                {insert before={[,phantom]}}
                {}
        },
        fit=band,
        before computing xy={l=15pt},
    }
    #1
\end{forest}}

\DeclareGraphicsExtensions{.png, .jpg, .pdf, .eps, .tiff}
\DeclareGraphicsRule{.eps}{pdf}{.pdf}{pdf}
\pdfcompresslevel=9
\geometry{a4paper, left=2.6cm, right=2.2cm, top=3.0cm, bottom=3.0cm}
\linespread{1.2}
\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}

\bibliography{main}

\begin{document}
    \include{chapters/Front}
    \clearpage
    \thispagestyle{empty}
    \vspace{5cm}
    \frontmatter
    \include{chapters/Resumen}
    \include{chapters/Abstract}
    \tableofcontents
    \listoffigures
    \mainmatter
    \include{chapters/1-Introduccion}
    \include{chapters/2-Antecedentes}
    \include{chapters/3-Componentes}
    \include{chapters/4-Tecnologias}
    \printbibliography[title=Bibliografía]
\end{document}